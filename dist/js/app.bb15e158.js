(function(e){function t(t){for(var o,r,l=t[0],c=t[1],u=t[2],d=t[3]||[],_=0,p=[];_<l.length;_++)r=l[_],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&p.push(a[r][0]),a[r]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);m&&m(t),s.push.apply(s,d);while(p.length)p.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],o=!0,r=1;r<n.length;r++){var u=n[r];0!==a[u]&&(o=!1)}o&&(i.splice(t--,1),e=c(c.s=n[0]))}return 0===i.length&&(s.forEach((function(e){if(void 0===a[e]){a[e]=null;var t=document.createElement("link");c.nc&&t.setAttribute("nonce",c.nc),t.rel="prefetch",t.as="script",t.href=l(e),document.head.appendChild(t)}})),s.length=0),e}var o={},r={app:0},a={app:0},i=[],s=[];function l(e){return c.p+"js/"+({}[e]||e)+"."+{"chunk-5b369f22":"da9fe064"}[e]+".js"}function c(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(e){var t=[],n={"chunk-5b369f22":1};r[e]?t.push(r[e]):0!==r[e]&&n[e]&&t.push(r[e]=new Promise((function(t,n){for(var o="css/"+({}[e]||e)+"."+{"chunk-5b369f22":"0ac68a7d"}[e]+".css",a=c.p+o,i=document.getElementsByTagName("link"),s=0;s<i.length;s++){var l=i[s],u=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(u===o||u===a))return t()}var d=document.getElementsByTagName("style");for(s=0;s<d.length;s++){l=d[s],u=l.getAttribute("data-href");if(u===o||u===a)return t()}var _=document.createElement("link");_.rel="stylesheet",_.type="text/css",_.onload=t,_.onerror=function(t){var o=t&&t.target&&t.target.src||a,i=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=o,delete r[e],_.parentNode.removeChild(_),n(i)},_.href=a;var m=document.getElementsByTagName("head")[0];m.appendChild(_)})).then((function(){r[e]=0})));var o=a[e];if(0!==o)if(o)t.push(o[2]);else{var i=new Promise((function(t,n){o=a[e]=[t,n]}));t.push(o[2]=i);var s,u=document.createElement("script");u.charset="utf-8",u.timeout=120,c.nc&&u.setAttribute("nonce",c.nc),u.src=l(e);var d=new Error;s=function(t){u.onerror=u.onload=null,clearTimeout(_);var n=a[e];if(0!==n){if(n){var o=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+o+": "+r+")",d.name="ChunkLoadError",d.type=o,d.request=r,n[1](d)}a[e]=void 0}};var _=setTimeout((function(){s({type:"timeout",target:u})}),12e4);u.onerror=u.onload=s,document.head.appendChild(u)}return Promise.all(t)},c.m=e,c.c=o,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)c.d(n,o,function(t){return e[t]}.bind(null,o));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/",c.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],d=u.push.bind(u);u.push=t,u=u.slice();for(var _=0;_<u.length;_++)t(u[_]);var m=d,p=function(){return i.push([0,"chunk-vendors"]),n()}();t([[],{},0,["chunk-5b369f22"]])})({0:function(e,t,n){e.exports=n("56d7")},"56d7":function(e,t,n){"use strict";n.r(t);n("d3b7"),n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"stormchaser"}},[n("v-app",[e.is_logged_in?n("v-container",{attrs:{fluid:""}},[n("v-navigation-drawer",{attrs:{clipped:"",absolute:"",temporary:"",color:"primary",dark:"","mini-variant.sync":"true"},model:{value:e.nav_drawer,callback:function(t){e.nav_drawer=t},expression:"nav_drawer"}},[n("v-list",{staticClass:"navigation_items",attrs:{nav:""}},[n("v-list-item",{attrs:{link:""},on:{click:function(t){return e.navigate({name:"make-model-run"})}}},[n("v-list-item-icon",[n("v-icon",[e._v("mdi-account-hard-hat")])],1),n("v-list-item-content",[e._v(" New Model Run ")])],1),n("v-list-item",{attrs:{link:""},on:{click:function(t){return e.navigate({name:"list-model-runs"})}}},[n("v-list-item-icon",[n("v-icon",[e._v("mdi-format-list-text")])],1),n("v-list-item-content",[e._v(" My Model Runs ")])],1),n("v-list-item",{attrs:{link:""},on:{click:function(t){return e.navigate({name:"data-viewer"})}}},[n("v-list-item-icon",[n("v-icon",[e._v("mdi-database")])],1),n("v-list-item-content",[e._v(" Data Viewer ")])],1),n("v-list-item",{attrs:{link:""},on:{click:function(t){return e.navigate({name:"log"})}}},[n("v-list-item-icon",[n("v-icon",[e._v("mdi-console")])],1),n("v-list-item-content",[e._v(" Application Log ")])],1),n("v-list-item",{attrs:{link:""},on:{click:function(t){return e.navigate({name:"help"})}}},[n("v-list-item-icon",[n("v-icon",[e._v("mdi-help")])],1),n("v-list-item-content",[e._v(" Help ")])],1),n("v-list-item",{attrs:{link:""},on:{click:function(t){return e.navigate({name:"settings"})}}},[n("v-list-item-icon",[n("v-icon",[e._v("mdi-account-cog")])],1),n("v-list-item-content",[e._v(" Settings ")])],1),n("v-list-item",{attrs:{link:""},on:{click:function(t){return e.navigate({name:"logout"})}}},[n("v-list-item-icon",[n("v-icon",[e._v("mdi-logout")])],1),n("v-list-item-content",[e._v(" Logout ")])],1)],1)],1),n("v-btn",{attrs:{color:"pink",dark:"",icon:""},on:{click:function(t){t.stopPropagation(),e.nav_drawer=!e.nav_drawer}}},[n("v-icon",[e._v("menu")])],1),n("router-view")],1):e._e(),e.is_logged_in?e._e():n("v-container",{attrs:{fluid:""}},[n("AppLogin")],1)],1)],1)},a=[],i=n("ce5b"),s=n.n(i);n("bf40");o["default"].use(s.a);var l={},c=new s.a(l),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-flex",{staticClass:"login"},[n("notification-snackbar",{attrs:{constant_snackbar_text:"Failed to log you in",error_text:e.login_failed_text},model:{value:e.login_failed_snackbar,callback:function(t){e.login_failed_snackbar=t},expression:"login_failed_snackbar"}}),n("h2",[e._v("Login")]),n("v-form",{on:{submit:e.do_login}},[n("v-text-field",{attrs:{label:"Username",required:"",rules:e.username_rules},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),n("v-text-field",{attrs:{label:"Password",type:"password",required:"",rules:e.password_rules},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),n("v-btn",{attrs:{type:"submit",disabled:!e.form_valid}},[e._v("Log In")])],1)],1)},d=[],_=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-snackbar",{attrs:{top:"",timeout:e.timeout},scopedSlots:e._u([{key:"action",fn:function(t){var o=t.attrs;return[n("v-btn",e._b({attrs:{color:"pink",text:""},on:{click:function(t){e.value=!1}}},"v-btn",o,!1),[e._v(" Close ")])]}}]),model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[e._v(" "+e._s(e.constant_snackbar_text)+": "+e._s(e.error_text)+" ")])},m=[],p=(n("a9e3"),{name:"NotificationSnackbar",props:{value:Boolean,timeout:{type:Number,default:-1},constant_snackbar_text:String,error_text:String},watch:{value:function(){this.$emit("input",this.value)}}}),f=p,v=n("2877"),h=Object(v["a"])(f,_,m,!1,null,"96cd77bc",null),g=h.exports,b={name:"AppLogin",components:{NotificationSnackbar:g},data:function(){return{username:null,password:null,login_failed_snackbar:!1,login_failed_text:"",username_rules:[function(e){return!!e||"Username is required"},function(e){return e.length>=3||"Invalid username"}],password_rules:[function(e){return!!e||"Password is required"}]}},computed:{form_valid:function(){return!(!this.username||!this.password)}},methods:{do_login:function(){var e=this,t=this.$store.dispatch("do_login",{username:this.username,password:this.password});t.then((function(t){"non_field_errors"in t&&(e.login_failed_text=t.non_field_errors[0],e.login_failed_snackbar=!0)})).catch((function(){e.login_failed_text="Unknown login error",e.login_failed_snackbar=!0}))}}},k=b,w=Object(v["a"])(k,u,d,!1,null,"06008719",null),x=w.exports,y={name:"stormchaser",components:{AppLogin:x},vuetify:c,data:function(){return{nav_drawer:null}},beforeMount:function(){},methods:{load:function(){console.log("Variables fetched"),this.$store.dispatch("fetch_regions")},load_failed:function(){console.log("Failed to fetch variables")},navigate:function(e){this.$router.push(e)}},computed:{is_logged_in:function(){var e=this.$store.state.user_api_token;return null!==e&&void 0!==e&&""!==e}}},S=y,C=(n("7faf"),Object(v["a"])(S,r,a,!1,null,null,null)),j=C.exports,R=n("8c4f"),$=(n("99af"),n("4160"),n("159b"),n("96cf"),n("1da1")),O=n("2f62");o["default"].use(O["a"]);var M=new O["a"].Store({state:{regions:[],model_runs:{},user_information:{},user_api_token:null,api_server_url:"//"+window.location.host,api_url_login:"//"+window.location.host+"/api-token-auth/",api_url_variables:"//"+window.location.host+"/application-variables/",api_url_model_runs:null,api_url_regions:null,organization_id:1,calibration_set_id:1},getters:{basic_auth_headers:function(e){var t=new Headers;return t.append("Authorization","Token ".concat(e.user_api_token)),t.append("Content-Type","application/json"),t}},mutations:{set_regions:function(e,t){console.log(t),e.regions=t},set_model_runs:function(e,t){console.log(t),e.model_runs=t},set_single_model_run:function(e,t){console.log("Updating data for model run "+t.id),e.model_runs[t.id]=t},append_model_run:function(e,t){console.log("Appending Model Run"),e.model_runs[t.id]=t},set_application_variables:function(e,t){console.log(t),e.user_api_token=t.user_api_token,e.api_url_model_runs=t.api_url_model_runs,e.api_url_regions=t.api_url_regions,console.log(e.user_api_token)},set_user_information:function(e,t){e.user_information=t},set_api_token:function(e,t){e.user_api_token=t}},actions:{set_model_runs:function(e,t){var n={};t.results.forEach((function(e){n[e.id]=e})),e.commit("set_model_runs",n)},fetch_model_runs:function(e){console.log("Fetching Model Runs"),console.log(e.state.api_url_model_runs),fetch(e.state.api_url_model_runs,{headers:e.getters.basic_auth_headers}).then((function(e){return e.json()})).then((function(t){return e.dispatch("set_model_runs",t)}))},update_model_run:function(){var e=Object($["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("Updating model run and results for model run ".concat(n)),e.next=3,fetch(t.state.api_url_model_runs+n,{headers:t.getters.basic_auth_headers}).then((function(e){return e.json()})).then((function(e){return t.commit("set_single_model_run",e)}));case 3:return e.abrupt("return",t.state.model_runs[n]);case 4:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}(),get_model_run_with_results:function(){var e=Object($["a"])(regeneratorRuntime.mark((function e(t,n){var o,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:o=function(e){return new Promise((function(t){return setTimeout(t,e)}))},r=void 0,a=0;case 3:if(void 0!==r){e.next=14;break}if(r=t.state.model_runs[n],null!==r&&void 0!==r){e.next=8;break}return e.next=8,o(100);case 8:if(a+=1,!(a>150)){e.next=12;break}return console.log("Failed to wait for model runs to be initialized - couldn't retrieve model run with ID "+n+" from application state"),e.abrupt("break",14);case 12:e.next=3;break;case 14:if(null!==r.results&&void 0!==r.results){e.next=19;break}return console.log("Fetching model run update and any results"),e.next=18,t.dispatch("update_model_run",r.id);case 18:r=e.sent;case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}(),set_regions:function(e,t){t.results.forEach((function(e,n){t.results[n].active=!1,t.results[n].water_proportion=100,t.results[n].land_proportion=100})),e.commit("set_regions",t.results)},fetch_regions:function(e){console.log("Fetching Regions"),console.log(e.state.api_url_regions),fetch(e.state.api_url_regions,{headers:e.getters.basic_auth_headers}).then((function(e){return e.json()})).then((function(t){return e.dispatch("set_regions",t)}))},application_setup:function(e){e.dispatch("fetch_variables")},fetch_variables:function(e){var t={};e.state.user_api_token&&(t=e.getters.basic_auth_headers),fetch(e.state.api_url_variables,{headers:t}).then((function(e){return e.json()})).then((function(t){return e.commit("set_application_variables",t)}),(function(){console.log("Failed during loading application variables")})).then((function(){e.dispatch("fetch_regions").catch(console.log("Failed to load regions"))})).then((function(){e.dispatch("fetch_model_runs").catch(console.log("Failed to load model runs"))})).catch((function(){console.log("Failed during loading")}))},do_login:function(e,t){var n=t.username,o=t.password,r='\n                {\n                "username": "'.concat(n,'",\n                "password": "').concat(o,'"\n                }\n            '),a={"Content-type":"application/json"};return fetch(e.state.api_url_login,{method:"POST",headers:a,body:r,credentials:"omit"}).then((function(t){return t.json().then((function(t){return"token"in t&&(e.commit("set_api_token",t.token),e.dispatch("fetch_variables"),e.commit("user_information",t)),t}))})).catch((function(){console.error("Login or application setup failed for unknown reason")}))}}}),E=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-layout",{attrs:{row:""}},[n("v-flex",{attrs:{xs12:"",lg9:"",id:"new_model_run"}},[n("h2",[e._v("New Model Run")]),n("v-stepper",{model:{value:e.model_creation_step,callback:function(t){e.model_creation_step=t},expression:"model_creation_step"}},[n("v-flex",{attrs:{xs12:""}},[n("v-stepper-header",[[n("v-stepper-step",{key:"1-step",attrs:{complete:e.model_creation_step>e.n,step:"1",editable:""}},[e._v(" Region Modifications ")]),n("v-stepper-step",{key:"2-step",attrs:{complete:e.model_creation_step>e.n,step:"2",editable:""}},[e._v(" Crop Modifications ")]),n("v-stepper-step",{key:"3-step",attrs:{complete:e.model_creation_step>e.n,step:"3",editable:""}},[e._v(" Model Details ")]),e.n!==e.steps?n("v-divider",{key:e.n}):e._e()]],2)],1),n("v-stepper-items",[n("v-stepper-content",{key:"`1-content`",attrs:{step:"1"}},[n("v-flex",{attrs:{xs12:"",md6:""}},[n("h3",[e._v("Add Region Modifications")]),n("v-autocomplete",{attrs:{items:e.allRegions,"item-text":"name",clearable:"","deletable-chips":"",chips:"","small-chips":"",label:"Add Regions","return-object":"","persistent-hint":"",multiple:"",solo:""},model:{value:e.selected_regions,callback:function(t){e.selected_regions=t},expression:"selected_regions"}}),n("v-flex",e._l(e.selected_regions,(function(t){return n("Region",{key:t.id,attrs:{region:t},on:{"region-deactivate":e.deactivate_region}})})),1),n("v-btn",{attrs:{color:"primary"},on:{click:function(t){return e.next_step(1)}}},[e._v(" Continue ")])],1),n("v-flex",{attrs:{xs12:"",md6:""}},[e._v(" Yo, I'm a map ")])],1),n("v-stepper-content",{key:"`2-content`",attrs:{step:"2"}},[n("h3",[e._v("Add Crop Modifications")]),n("v-btn",{attrs:{color:"primary"},on:{click:function(t){return e.next_step(2)}}},[e._v(" Continue ")])],1),n("v-stepper-content",{key:"`3-content`",attrs:{step:"3"}},[n("h3",[e._v("Add Model Details")]),n("v-snackbar",{attrs:{top:"",timeout:"-1"},scopedSlots:e._u([{key:"action",fn:function(t){var o=t.attrs;return[n("v-btn",e._b({attrs:{color:"pink",text:""},on:{click:function(t){e.model_created_snackbar=!1}}},"v-btn",o,!1),[e._v(" Close ")])]}}]),model:{value:e.model_created_snackbar,callback:function(t){e.model_created_snackbar=t},expression:"model_created_snackbar"}},[e._v(" Model Run Created. "),n("v-btn",{attrs:{color:"pink",text:"",to:{name:"model-run",params:{id:this.last_model_run.id}}}},[e._v(" Go to Model Run ")])],1),n("notification-snackbar",{attrs:{error_text:e.model_creation_failed_text,constant_snackbar_text:"Could not create model run"},model:{value:e.model_creation_failed_snackbar,callback:function(t){e.model_creation_failed_snackbar=t},expression:"model_creation_failed_snackbar"}}),n("v-text-field",{attrs:{label:"Model Run Name"},model:{value:e.new_model_run_name,callback:function(t){e.new_model_run_name=t},expression:"new_model_run_name"}}),n("v-textarea",{attrs:{label:"Description or Metadata",hint:"Include any details here that help you remember the intent or purpose of this model run. Input parameters will be automatically captured and shown with results."},model:{value:e.new_model_run_description,callback:function(t){e.new_model_run_description=t},expression:"new_model_run_description"}}),n("v-btn",{on:{click:e.run_model}},[e._v("Run Model")]),this.last_model_run.id?n("v-btn",{attrs:{href:e.results_download_url,download:""}},[e._v("Download Results")]):e._e(),this.last_model_run.id?n("v-btn",{attrs:{to:{name:"model-run",params:{id:this.last_model_run.id}}}},[e._v("Go to Model Run")]):e._e()],1)],1)],1)],1)],1)},A=[],N=(n("4de4"),n("caad"),n("2532"),n("ddb0"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("StormCard",{attrs:{class_name:"region",title:e.region.name,card_item:e.region},on:{"card-activate":e.activate,"card-deactivate":e.deactivate}},[n("h4",[e._v(e._s(e.region.internal_id)+": "+e._s(e.region.name))]),e.region.active?n("div",{staticClass:"region_params"},[n("StormCardSlider",{attrs:{initial_value:100,min:e.min_water,max:e.max_water,label:"Water Availability (%)"},model:{value:e.region.water_proportion,callback:function(t){e.$set(e.region,"water_proportion",t)},expression:"region.water_proportion"}}),n("StormCardSlider",{attrs:{initial_value:100,min:e.min_water,max:e.max_water,label:"Land Availability (%)"},model:{value:e.region.land_proportion,callback:function(t){e.$set(e.region,"land_proportion",t)},expression:"region.land_proportion"}})],1):e._e()])}),P=[],L=(n("b0c0"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{staticClass:"storm_card",class:e.class_name,attrs:{elevation:"5","min-width":"100","max-width":"500",title:e.title}},[e._t("default"),this.card_item.active?e._e():n("button",{staticClass:"add_card",on:{click:function(t){return e.$emit("card-activate")}}},[e._v("Add")]),this.card_item.active?n("button",{staticClass:"remove_card",on:{click:function(t){return e.$emit("card-deactivate")}}},[e._v("X")]):e._e()],2)}),T=[],D={name:"StormCard",props:{title:String,class_name:String,card_item:Object}},F=D,U=Object(v["a"])(F,L,T,!1,null,"a71d31b0",null),I=U.exports,q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"stormcard_slider"},[n("span",{domProps:{textContent:e._s(e.slider_value)}}),n("v-slider",{attrs:{label:e.label,min:e.min,max:e.max,value:e.initial_value,color:"blue","track-color":"grey"},scopedSlots:e._u([{key:"prepend",fn:function(){return[n("v-icon",{on:{click:e.decrement_slider_value}},[e._v(" remove ")])]},proxy:!0},{key:"append",fn:function(){return[n("v-icon",{on:{click:e.increment_slider_value}},[e._v(" add ")])]},proxy:!0}]),model:{value:e.slider_value,callback:function(t){e.slider_value=t},expression:"slider_value"}})],1)},z=[],B={name:"StormCardSlider",props:{value:Number,label:String,min:Number,max:Number,initial_value:Number},data:function(){return{slider_value:this.initial_value}},methods:{increment_slider_value:function(){this.slider_value++},decrement_slider_value:function(){this.slider_value--}},watch:{slider_value:function(){this.$emit("input",this.slider_value)}}},J=B,H=Object(v["a"])(J,q,z,!1,null,"67ce6650",null),G=H.exports,V={name:"Region",components:{StormCard:I,StormCardSlider:G},props:{region:Object},methods:{activate:function(){console.log("activating region"),this.region.active=!0,this.$emit("region-activate")},deactivate:function(){console.log("deactivating region"),this.region.active=!1,this.$emit("region-deactivate")}},computed:{text:function(){return"".concat(this.region.internal_id,": ").concat(this.region.name)},min_water:function(){return 50},max_water:function(){return 120}}},K=V,W=Object(v["a"])(K,N,P,!1,null,"7d3c179e",null),X=W.exports,Y={components:{NotificationSnackbar:g,Region:X},name:"MakeModelRun",data:function(){return{selected_regions:[],last_model_run:{},model_creation_step:1,new_model_run_name:null,new_model_run_description:null,model_created_snackbar:!1,model_creation_failed_snackbar:!1,model_creation_failed_text:null}},watch:{selected_regions:function(e,t){var n=e.filter((function(e){return!t.includes(e)})),o=t.filter((function(t){return!e.includes(t)}));n.forEach((function(e){e.active=!0})),o.forEach((function(e){e.active=!1}))}},methods:{next_step:function(e){this.model_creation_step=e+1},deactivate_region:function(){console.log("Deactivating"),this.selected_regions=this.activeRegions},activateRegion:function(e){console.log(e),e.active=!e.active},get_header:function(){return this.$store.getters.basic_auth_headers},set_model_run:function(e){console.log("1"),console.log(e),this.last_model_run=e,console.log("2"),console.log(this.last_model_run),console.log("3"),console.log(e),this.results_download_url="/model_run/csv/".concat(e.id,"/"),console.log("4"),console.log(this.results_download_url)},reset_model:function(){this.new_model_run_name=null,this.new_model_run_description=null},run_model:function(){console.log("Creating Model Run");var e=this.get_header();console.log(e.values());var t=this.activeRegions,n=[];t.forEach((function(e){var t={region:e.id,water_proportion:e.water_proportion/100,land_proportion:e.land_proportion/100};n.push(t)}));var o=this.new_model_run_name?'"'.concat(this.new_model_run_name,'"'):null,r=this.new_model_run_description?'"'.concat(this.new_model_run_description,'"'):null,a='{\n                            "name": '.concat(o,',\n                            "description": ').concat(r,',\n                            "ready": true,\n                            "organization": ').concat(this.$store.state.organization_id,',\n                            "calibration_set": ').concat(this.$store.state.calibration_set_id,',\n                            "region_modifications": ').concat(JSON.stringify(n),"\n                        }");console.log(a);var i=this;return fetch(this.$store.state.api_url_model_runs,{method:"POST",headers:e,body:a}).then((function(e){return console.log(e),e.json().then((function(t){e.ok?(console.log("JSON data"),console.log(t),i.last_model_run=t,i.$store.commit("append_model_run",t),i.model_created_snackbar=!0,i.reset_model()):(i.model_creation_failed_snackbar=!0,console.log(e),console.log(t),i.model_creation_failed_text="Server rejected model creation. See console for details.")}))})).catch((function(e){i.model_creation_failed_snackbar=!0,i.model_creation_failed_text="Unknown network error - please try again later: ".concat(e)}))}},computed:{activeRegions:function(){return this.$store.state.regions.filter((function(e){return!0===e.active}))},inactiveRegions:function(){return this.$store.state.regions.filter((function(e){return!1===e.active}))},allRegions:function(){return this.$store.state.regions},results_download_url:function(){return"".concat(this.$store.state.api_server_url,"/api/model_runs/").concat(this.last_model_run.id,"/csv/")}}},Q=Y,Z=(n("81f9"),Object(v["a"])(Q,E,A,!1,null,null,null)),ee=Z.exports,te=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-layout",{attrs:{row:""}},[n("v-flex",{staticStyle:{margin:"auto"},attrs:{xs12:"",lg9:""}},[n("h2",[e._v("Model Runs")]),n("v-btn",{on:{click:e.refresh_model_runs}},[n("v-icon",[e._v("mdi-refresh")]),e._v(" Update ")],1),n("v-data-table",{staticClass:"elevation-1 model_run_listing",attrs:{headers:e.headers,items:e.model_runs,"item-key":"id","show-select":"","multi-sort":"","sort-by":"date_submitted","sort-desc":"","items-per-page":"20"},on:{"click:row":e.view_model_run},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)],1)},ne=[],oe=(n("07ac"),{name:"ListModelRuns",data:function(){return{headers:[{text:"Run Name",value:"name"},{text:"Description",value:"description"},{text:"Date",value:"date_submitted"},{text:"Status",value:"complete"}]}},methods:{view_model_run:function(e){this.$router.push({name:"model-run",params:{id:e.id}})},refresh_model_runs:function(){this.$store.dispatch("fetch_model_runs")}},computed:{model_runs:function(){return Object.values(this.$store.state.model_runs)}}}),re=oe,ae=(n("8d5e"),Object(v["a"])(re,te,ne,!1,null,null,null)),ie=ae.exports,se=(n("d1e78"),function(){return n.e("chunk-5b369f22").then(n.bind(null,"64b4"))});o["default"].use(R["a"]),o["default"].config.productionTip=!1;var le=[{path:"/make-model-run",name:"make-model-run",component:ee},{path:"/model-runs",name:"list-model-runs",component:ie},{path:"/model-run/:id",name:"model-run",component:se}],ce=new R["a"]({routes:le}),ue=new o["default"]({store:M,router:ce,vuetify:c,render:function(e){return e(j)}}).$mount("#app");console.log(ue)},"7faf":function(e,t,n){"use strict";var o=n("b8ff"),r=n.n(o);r.a},"81f9":function(e,t,n){"use strict";var o=n("eb10"),r=n.n(o);r.a},"8d5e":function(e,t,n){"use strict";var o=n("f364"),r=n.n(o);r.a},b8ff:function(e,t,n){},eb10:function(e,t,n){},f364:function(e,t,n){}});
//# sourceMappingURL=app.bb15e158.js.map